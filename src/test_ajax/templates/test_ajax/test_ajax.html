{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test AJAX call</title>
     <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
          crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{% static 'test_ajax/css/style.css' %}">
</head>
<body>
   <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand">
        <img src="{% static 'img/download (1).jpg' %}"
             width="30" height="30" class="d-inline-block align-top rounded-circle" alt="">
        Welkom in de pagina Test AJAX call
    </a>
    <a href="/page1">
        <i class="fa fa-arrow-circle-o-left" aria-hidden="true"></i>
        Terug</a>
</nav>
   <br>
<br>

<div class="container">
        <div class="row centered-form">
        <div class="col-xs-12 col-sm-8 col-md-4 col-sm-offset-2 col-md-offset-4">
        	<div class="panel panel-default">
        		<div class="panel-heading">
			    		<h3 class="panel-title">Hier kunt u een user aanmaken </h3>
			 			</div>
			 			<div class="panel-body">
			    		<form role="form" id="new_user_form"> {% csrf_token %}
			    			<div class="row">
			    				<div class="col-xs-6 col-sm-6 col-md-6">
			    					<div class="form-group">
			    						<input type="text" name="name" id="name" class="form-control input-sm" placeholder="Naam">
			    					</div>
			    				</div>
			    			</div>

			    			<div class="form-group">
			    				<input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email">
			    			</div>

			    			<div class="row">
			    				<div class="col-xs-6 col-sm-6 col-md-6">
			    					<div class="form-group">
			    						<input type="password" name="password" id="password" class="form-control input-sm" placeholder="Wachtwoord">
			    					</div>
			    				</div>
			    				<div class="col-xs-6 col-sm-6 col-md-6">
			    					<div class="form-group">
			    						<input type="password" name="password_confirmation" id="password_confirmation" class="form-control input-sm" placeholder="Confirm Password">
			    					</div>
			    				</div>
			    			</div>

			    			<input type="submit" value="Register" class="btn btn-info btn-block">
                            <div id="loader"
                                 style="margin-top: 10px; display: none"
                                 class="loader">
                                <img src="{% static 'img/ajax-loader.gif' %}">
                            </div>
                            <div id="result">
                            </div>
			    		</form>
			    	</div>
	    		</div>
    		</div>
    	</div>
    </div>

</body>
<script type="text/javascript">
    $(document).on('submit','#new_user_form', function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '/test_ajax/',
            data: {
                name: $('#name').val(),
                email:$('#email').val(),
                password:$('#password').val(),
                beforeSend: function (){
                     $("#loader").show();
                },
                complete: function (){
                     setTimeout(function (){
                        $("#loader").hide();
                    }, 5000)
                },
                 csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
            },
            success: function (){
                  setTimeout(function (){
                        alert('Gebruiker is opgeslagen!')
                    }, 5000)
            }
        })
    });
</script>
</html>
